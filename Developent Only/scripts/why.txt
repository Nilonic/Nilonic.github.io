duplicated for @tests and @template